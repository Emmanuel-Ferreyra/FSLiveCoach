<!DOCTYPE html>
<html lang="en">
    <head>
        <link rel="import" href="header.html" >
        <!-- additional css -->
        <link href="http://fonts.googleapis.com/css?family=Open+Sans:400italic,600italic,400,600" rel="stylesheet">
        <link href="css/theme.css" rel="stylesheet">
        <!--link href="css/pages/dashboard.css" rel="stylesheet">
        <link href="css/main.css" rel="stylesheet"-->
    </head>
    <body>
        <!-- navigation bar -->
        <link rel="import" href="navigation.html" >
        <!-- main -->
        <div class="main">
            <div class="main-inner">
                <div class="container">
                    <div class="row">
                        <div class="span7">
                            <div class="widget">
                                <!--div class="widget-header"> <i class="fa fa-list" aria-hidden="true"></i>
                                    <h3>Video Repository</h3>
                                </div-->
                                <!-- /widget-header -->
                                <div class="info-box" style="align:center">
                                    <video id="videoplayer" controls></video>
                                </div>
                                <!-- /info-box -->
                            </div>
                            <!-- /widget -->
                        </div>
                        <!-- /span6 -->
                        <div class="span5">
                            <!-- /widget -->
                            <div class="widget">
                                <div class="widget widget-table action-table">
                                    <!--div class="widget-header"> <i class="fa fa-list" aria-hidden="true"></i>
                                        <h3>Video Repository</h3>
                                    </div-->
                                    <!-- /widget-header -->
                                    <div class="widget-content">
                                        <table id="playlist" class="display compact" style="color:black">
                                            <thead>
                                                <tr>
                                                    <th>Name</th>
                                                    <th>Date</th>
                                                    <th class="td-actions">Play</th>
                                                    <th class="td-actions">Download</th>
                                                </tr>
                                            </thead>
                                            <tfoot>
                                                <tr>
                                                    <th>Name</th>
                                                    <th>Date</th>
                                                    <th class="td-actions">Play</th>
                                                    <th class="td-actions">Download</th>
                                                </tr>
                                            </tfoot>
                                        </table>
                                    </div>
                                    <!-- /widget-content -->
                                </div>
                            </div>
                            <!-- /span6 -->
                        </div>
                        <!-- /row -->
                    </div>
                    <!-- /container -->
                </div>
                <!-- /main-inner -->
            </div>
        </div>
        <!-- footer -->
        <link rel="import" href="footer.html" >
        <!-- Javascript - Placed at the end of the document so the pages load faster -->
        <script>
            $(document).ready(function () {
                //var dir = '/images/';
                //var dir = 'http://155.245.92.172:8888/uploads/';
                //var dir = 'http://52.50.72.207:81/uploads/';
                var dir = 'http://52.19.221.103:8080/videos/';
                var url_datasource = dir + 'videos_list.json';
                var video = document.querySelector('video#videoplayer');
                video.src = dir + "call_1462549792.webm";
                
                var table = $('#playlist').DataTable({
                    ajax: {
                        url: url_datasource,
                        dataSrc: 'data'
                    },
                    columns: [
                        {data: 'name'},
                        {data: 'date'},
                        {data: 'play'},
                        {data: 'download'}
                    ],
                    info: false,
                    paging: true,
                    ordering: true,
                    bLengthChange: false,
                    order: [[2,"desc"]]
                });
                        
                $('#playlist tbody').on('click', '.videoLink', function () {
                    var value = $(this).attr("id");

                    console.log("Video selected: = " + value);

                    video.pause();

                    video.src = dir + value;

                    video.load();
                    video.play();
                    return false;                
                } );
            });
        </script>
    </body>
</html>